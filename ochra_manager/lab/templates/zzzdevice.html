{% extends "zzmain_layout.html" %}

{% block content %}
<div id="deviceView" class="flex flex-col flex-1 {% if sidepanel_view %}h-full overflow-hidden lg:flex{% endif %}">
	<!--Banner-->
	<div class="flex w-full p-6 border-b-[0.5px] border-text dark:border-dark-text justify-between">
		<div>
			<h1 class="text-primary dark:text-dark-primary text-4xl">Device</h1>
			<p class="text-text dark:text-dark-text">Logged in as {{request.state.user.username}}</p>
		</div>
		<div class="w-1.5 h-1.5 rounded-full bg-success dark:bg-dark-success animate-pulse">
		</div>
	</div>

	<!--Main Content-->
	<div class="flex-1 overflow-y-auto">
        <a href="/app" class="z-50 absolute left-0 top-0 pl-2 pt-2 lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" class="fill-text dark:fill-dark-text" height="24px" viewBox="0 -960 960 960"
                width="24px">
                <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z" />
            </svg>
        </a>

		<div class="p-3 border-b-[0.5px] border-text dark:border-dark-text">
		</div>
		<div class="overflow-x-scroll max-w-screen">
            <div class="p-6">
                <h1 class="text-primary dark:text-dark-primary text-4xl">{{station._name}}</h1>
                <p class="">{{device.name}}</p>
            </div>
            <div class="text-lg text-center  absolute bottom-0 w-full">
                <ul class="flex px-6 pb-1 gap-4">
                    <li>
                        <a class="hover:cursor-pointer" hx-trigger="click" hx-target="#sidepanel" hx-swap="innerHTML"
                            hx-push-url="true" hx-get="/app/stations/{{station.id}}">Home</a>
                    </li>
                    {% for _, d in station._devices.items() %}
                    {% if d.id == device.id %}
                    <li class="text-primary">
                        <a class="hover:cursor-pointer" hx-trigger="click" hx-target="#sidepanel" hx-swap="innerHTML"
                            hx-get="/app/stations/{{station.id}}/devices/{{d.id}}" hx-push-url="true">{{d.name}}</a>
                    </li>
                    {% else %}
                    <li>
                        <a class="hover:cursor-pointer" hx-trigger="click" hx-target="#sidepanel" hx-swap="innerHTML"
                            hx-get="/app/stations/{{station.id}}/devices/{{d.id}}" hx-push-url="true">{{d.name}}</a>
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>
		</div>
	</div>
    {% include "/components/device_view.html"%}
</div>

<div id="SIDEPANEL_CONTAINER" 
{% if not sidepanel_view %} 
    class="hidden relative lg:block w-7 lg:w-7" 
{% else %}
    class="w-full relative lg:w-90"
{% endif %}
>
    <button 
        id="TOGGLE_BUTTON"
        class="absolute left-0 top-0.5 z-50 -translate-y-0.5 text-text dark:text-dark-text text-xl px-2 py-2 rounded-r hover:cursor-pointer"
    >
        â–¶
    </button>
    <div class="absolute hidden lg:block top-0 left-0 z-40 h-screen w-2 hover:cursor-e-resize" id="RESIZER">
        
    </div>
        {% include "/components/sidepanel.html"%}
    <script src="/static/js/resize.js"></script> 
    <script src="/static/js/expand.js"></script> 
</div>

{% endblock %}